shared:
    image: node:12

jobs:
    main:
        requires: [~pr, ~commit]
        steps:
            - step1:  sleep 2 && echo ok
            - step2:  sleep 2 && echo ok
            - shell: ./bin/myshell.sh -i -e ats
    fan1:
        requires: main
        steps:
            - step3:  sleep 2 && echo ok
            - step4:  sleep 2 && echo ok
            - step5:  sleep 2 && echo ok
            - step6:  sleep 2 && echo ok
            - step7:  sleep 2 && echo ok

    fan2:
        requires: main
        steps:
            - step8:  sleep 2 && echo ok
            - step9:  sleep 2 && echo ok
            - step10: sleep 2 && echo ok
            - step11: sleep 2 && echo ok
            - step12: sleep 2 && echo ok
    fan3:
        requires: main
        steps:
            - step13: sleep 2 && echo ok
            - step14: sleep 2 && echo ok
            - step15: sleep 2 && echo ok
    dot1:
        requires: [~fan1, ~fan2]
        steps:
            - step13: sleep 2 && echo ok

    dot2:
        requires: [~fan1, ~fan2]
        steps:
            - step13: sleep 2 && echo ok

    sink:
        requires: [dot1, dot2, fan3]
        steps:
            - step16: sleep 2 && echo ok
            - step17: sleep 2 && echo ok
            - step18: sleep 2 && echo ok
            - step19: sleep 2 && echo ok
            - step20: sleep 2 && echo ok
